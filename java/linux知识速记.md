> è®°å½•ä½¿ç”¨debianè¿‡ç¨‹ä¸­æ”¶è·çš„ä¸€äº›linuxçŸ¥è¯†ç‚¹

# å°çŸ¥è¯† 

1. æœ‰çš„ubuntuæœåŠ¡å™¨ä¼šé»˜è®¤å®‰è£…ä¸€ä¸ªå« `needrestart` çš„è½¯ä»¶ã€‚æ¯æ¬¡é€šè¿‡aptå®‰è£…å®Œæˆåéƒ½ä¼šå¼¹å‡ºä¸€ä¸ªç²‰è‰²çš„æ¡†è¯¢é—®æ˜¯å¦éœ€è¦é‡å¯æŸä¸ªæœåŠ¡ã€‚

![](https://cdn.jsdmirror.com/gh/HmEJ/images@main/image-20250211215903828.png)

# she-bang

`#!` ç¬¦å·åœ¨è„šæœ¬çš„ç¬¬ä¸€è¡Œç”¨äºæŒ‡å®šè§£é‡Šå™¨è¿è¡Œç¯å¢ƒ

æ¯”å¦‚ï¼Œluaè„šæœ¬çš„ç¬¬ä¸€è¡Œ

```lua
#! /usr/local/bin/lua
print("hello world!");
```

æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦åŠ `lua` æŒ‡ä»¤å‰ç¼€æ¥è¿è¡Œã€‚å› ä¸ºshe-bangå·²ç»æŒ‡å®šäº†è„šæœ¬çš„è¿è¡Œç¯å¢ƒã€‚

# ç»ˆç«¯å¿«æ·é”®

`ctl+L` æ¸…å±ä½†ä¸åˆ é™¤å‘½ä»¤ã€‚å†…å®¹å‘ä¸Šæ»šåŠ¨ ( æ¯”clearè¦å¥½å¾—å¤š )

`ctl+U` æ¸…ç©ºå½“å‰å‘½ä»¤(å¤ªæœ‰ç”¨äº†!)

`shift+pageDown/up` ç¿»é¡µ

`shift+home/end` å…‰æ ‡ç§»è‡³å¤´/å°¾

# å‘½ä»¤

## kill

`kill <-ä¿¡å·> <pid>`

- `TERM` æ­£å¸¸é€€å‡ºç¨‹åº

- `INT` ç›¸å½“äºctrl+c æ¥ä¸­æ–­ä¸€ä¸ªç¨‹åº

- `KILL` æ€æ­»è¿›ç¨‹ï¼Œå¼ºåˆ¶å‰¥ç¦»cpué‡Šæ”¾èµ„æº

- `STOP` æš‚åœè¿›ç¨‹

- `CONT` æ¢å¤è¿›ç¨‹

- `HUP` é‡è½½ï¼Œæ›´æ–°è¿›ç¨‹é…ç½®

- `USER1`, `USER2`ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·

> 1. **TERM (15 - SIGTERM):** å‘é€TERMä¿¡å·é€šçŸ¥è¿›ç¨‹æ­£å¸¸é€€å‡ºã€‚è¿™æ˜¯ä¸€ç§ä¼˜é›…çš„ç»ˆæ­¢æ–¹å¼ï¼Œå…è®¸è¿›ç¨‹å®Œæˆæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡å¹¶æ¸…ç†èµ„æºã€‚å¤§å¤šæ•°è¿›ç¨‹åœ¨æ¥æ”¶åˆ°TERMä¿¡å·æ—¶ä¼šå°½åŠ›è¿›è¡Œæ¸…ç†æ“ä½œï¼Œç„¶åè‡ªè¡Œé€€å‡ºã€‚
> 2. **INT (2 - SIGINT):** å‘é€INTä¿¡å·é€šå¸¸æ˜¯é€šè¿‡æŒ‰ä¸‹é”®ç›˜ä¸Šçš„Ctrl+Cç»„åˆé”®æ¥è§¦å‘ã€‚è¿™æ˜¯ä¸€ç§ä¸­æ–­ä¿¡å·ï¼Œé€šå¸¸ç”¨äºç»ˆæ­¢æ­£åœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„å‰å°è¿›ç¨‹ã€‚ç±»ä¼¼äºTERMï¼Œå®ƒä¹Ÿå…è®¸è¿›ç¨‹è¿›è¡Œæ¸…ç†å·¥ä½œï¼Œä½†æœ‰æ—¶å€™å®ƒå¯èƒ½ä¼šè¢«å¿½ç•¥ã€‚
> 3. **QUIT (3 - SIGQUIT):** å‘é€QUITä¿¡å·ä¼šå¼•èµ·è¿›ç¨‹çš„æ ¸å¿ƒè½¬å‚¨ï¼ˆcore dumpï¼‰ã€‚ä¸TERMç›¸ä¼¼ï¼ŒQUITä¹Ÿæ˜¯ä¸€ç§ç»ˆæ­¢ä¿¡å·ï¼Œä½†å®ƒä¼šå¯¼è‡´è¿›ç¨‹åœ¨é€€å‡ºæ—¶ç”Ÿæˆæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ï¼Œç”¨äºè°ƒè¯•ã€‚
> 4. **KILL (9 - SIGKILL):** å‘é€KILLä¿¡å·æ˜¯å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹çš„ä¸€ç§æ–¹å¼ï¼Œè¿›ç¨‹æ— æ³•æ•è·æˆ–é˜»æ­¢è¯¥ä¿¡å·ã€‚å®ƒä¼šç«‹å³ç»ˆæ­¢è¿›ç¨‹ï¼Œä¸ç»™è¿›ç¨‹ä»»ä½•æ¸…ç†æˆ–å…³é—­çš„æœºä¼šã€‚KILLä¿¡å·æ˜¯ä¸€ç§"æœ€åæ‰‹æ®µ"ï¼Œå› ä¸ºå®ƒä¸å…è®¸è¿›ç¨‹å®Œæˆæ¸…ç†å·¥ä½œã€‚

## â›”ğŸ˜ğŸ’¥â˜¢ï¸ğŸ˜±â˜ ï¸

- `rm -rf /` åˆ åº“è·‘è·¯

- `dd if=/dev/zero of=/dev/sda` æ“¦é™¤ç³»ç»Ÿç›˜æ•°æ®
  
  - ä»`/dev/zero`è¯»å–æ•°æ®ï¼Œç„¶åå†™å…¥åˆ°`/dev/sda`ï¼Œç›¸å½“äºæ¸…ç©ºç³»ç»Ÿç›˜æ•°æ®ã€‚`/dev/zero`æä¾›äº†ä¸€ä¸ªæ— é™è¿ç»­çš„é›¶å­—èŠ‚æµã€‚å½“ä½ ä» `/dev/zero` è¯»å–æ•°æ®æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªæ— é™çš„æµï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é›¶å­—èŠ‚ã€‚

## ç£ç›˜ç›¸å…³

- `df [-T] [-h]` æŸ¥çœ‹ç³»ç»Ÿç£ç›˜ç©ºé—´

- `du <ç›®å½•>` æŸ¥çœ‹æŒ‡å®šç›®å½•ç£ç›˜å¤§å°

- `free` æ˜¾ç¤ºå†…å­˜èµ„æºæƒ…å†µ

- `top` æ˜¾ç¤ºç³»ç»Ÿèµ„æºå ç”¨æ’è¡Œæ¦œ
  
  - `shift + e` åˆ‡æ¢æ•°æ®æ˜¾ç¤ºå•ä½ ( KB,MB,GB ) 

## ç³»ç»Ÿ

- `last` æŸ¥çœ‹æœåŠ¡å™¨ç™»é™†æƒ…å†µï¼ˆæ˜¾ç¤ºipå’Œç™»å½•æ—¶é—´ï¼‰

- `man` æŸ¥çœ‹å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£

- `uname` è¾“å‡ºç‰¹å®šçš„ç³»ç»Ÿä¿¡æ¯,å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ï¼Œç³»ç»Ÿç‰ˆæœ¬ç­‰å†…å®¹

- `tail` å°†æ–‡ä»¶å†…å®¹å†™åˆ°æ ‡å‡†è¾“å‡º(shell) å¯ä»¥æŒç»­ç”¨æ¥æ‰“å°æ—¥å¿—æ–‡ä»¶å†…å®¹ `tail -f <ç›®å½•>`

- `more` åˆ†é¡µæŸ¥çœ‹æŒ‡å®šç›®å½•çš„å®Œå…¨å†…å®¹

- `scp` ç”¨äºlinuxä¹‹é—´å¤åˆ¶æ–‡ä»¶å’Œç›®å½•
  
  - `scp abc.txt root@ipaddress:/home` å°†abc.txtä¸Šä¼ åˆ°æŒ‡å®šipåœ°å€çš„homeç›®å½•ä¸‹
  - `scp root@ipaddress:/home/abc.txt ./` å°†æŒ‡å®šipåœ°å€çš„homeç›®å½•ä¸‹çš„abc.txtä¸‹è½½åˆ°å½“å‰shellç›®å½•ä¸‹

- `chsh` æ›´æ”¹ä½¿ç”¨è€…shellè®¾å®š(åˆ‡æ¢shellç±»å‹:bash, zshç­‰)

- `tree <ç›®å½•>` æ˜¾ç¤ºæŒ‡å®šç›®å½•çš„æ ‘å½¢ç»“æ„ 

- `whereis`  å®šä½ä¸€ä¸ªâ€œå‘½ä»¤â€çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€æºæ–‡ä»¶ã€æ‰‹å†Œæ–‡ä»¶

- `pwd` æ˜¾ç¤ºå½“å‰æ‰€åœ¨å®Œæ•´è·¯å¾„

- `source` åˆ·æ–°å½“å‰shellç¯å¢ƒ

- `clear` æ¸…é™¤æ§åˆ¶å° ( è¿™ä¸ªåº”è¯¥åˆ»è¿›åŸºå› é‡Œäº†å§... )

- `ssh` sshåè®®ç›¸å…³
  
  - `ssh root@ipaddress` è¿æ¥æŒ‡å®šipåœ°å€çš„ä¸»æœº
  - `ssh-keygen -t rsa -C "email@email.com"` ç”ŸæˆåŒ…å«é‚®ç®±ç­¾åçš„rsaå¯†é’¥å¯¹

- `wget [url]` ä¸‹è½½urlå†…å®¹

- `curl -i [url]` å‘æŒ‡å®šurlå‘é€httpè¯·æ±‚å¹¶æ˜¾ç¤ºresponseå¤´

- `lsof -i:80` æŸ¥çœ‹å ç”¨80ç«¯å£çš„è¿›ç¨‹

- `ps [-ef] [-aux]` 

- `grep` æ­£åˆ™åŒ¹é…

- `pv` pipe viewerå°†æ•°æ®é€šè¿‡ç®¡é“ä¼ è¾“æ—¶æ˜¾ç¤ºè¿›åº¦ã€é€Ÿç‡ã€ä¼ è¾“çš„å­—èŠ‚æ•°ç­‰ä¿¡æ¯ã€‚ä¾‹å¦‚é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥ä½¿æ–‡ä»¶å†…å®¹ä¸€ä¸ªå­—ä¸€ä¸ªå­—çš„è¹¦å‡ºæ¥ï¼Œå®ç°ç±»ä¼¼ç”Ÿæˆå¼aiè¿”å›ç»“æœçš„æ•ˆæœã€‚

```sh
pv -qL 45 text.txt
```

# é…ç½®

## hosts

```shell
/etc/hosts
```

## vscodeå‘½ä»¤å‚æ•°

```shell
sudo code --no-sandbox --disable-gpu-sandbox --user-data-dir=/root/.vscode/
```

ä¸ºäº†æ–¹ä¾¿å¯ä»¥ç»™codeå†é…ä¸ªåˆ«åï¼ŒåŠ ä¸Šè¿™äº›å‚æ•°å°±å¥½äº†ã€‚æˆ‘ä½¿ç”¨çš„debian12ç³»ç»Ÿåœ¨rootæ¨¡å¼ä¸‹ä½¿ç”¨vscodeä¸èƒ½è¾“å…¥ä¸­æ–‡ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ...ğŸ« 

## æœåŠ¡

debianç³»ç»ŸæœåŠ¡ç›®å½•ï¼š

```shell
/lib/systemd/system/xxx.service
```

centosç³»ç»ŸæœåŠ¡ç›®å½•ï¼š

```shell
/usr/lib/systemd/system/xxx.service
```

ä»¥nginx.serviceå†…å®¹ä¸ºä¾‹ï¼š

```nginx
[Unit]
Description=nginx web service
Documentation=http://nginx.org/en/docs/
After=network.target #æœåŠ¡åœ¨network.targetå¯åŠ¨ä¹‹åå¯åŠ¨

[Service]
Type=forking #æœåŠ¡ç±»å‹ åœ¨å¯åŠ¨æ—¶ä¼šåˆ›å»ºå­è¿›ç¨‹
PIDFile=/usr/local/nginx/logs/nginx.pid #pidæ–‡ä»¶ä½ç½®
ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf  #æ‰§è¡Œå‰é¢„å¤„ç†æŒ‡ä»¤(nginx -tæµ‹è¯•)
ExecStart=/usr/local/nginx/sbin/nginx #æ‰§è¡ŒæŒ‡ä»¤
ExecReload=/usr/local/nginx/sbin/nginx -s reload #é‡è½½æŒ‡ä»¤
ExecStop=/usr/local/nginx/sbin/nginx -s stop #åœæ­¢æŒ‡ä»¤
PrivateTmp=true #å¯ç”¨ä¸€ä¸ªç§æœ‰çš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼ŒæœåŠ¡å°†åœ¨å…¶ä¸­æ“ä½œï¼Œè¿™æœ‰åŠ©äºå¢åŠ æœåŠ¡çš„å®‰å…¨æ€§

[Install]
WantedBy=default.target #æœåŠ¡åº”è¯¥è¢«æ·»åŠ åˆ° default.targetï¼Œå³ç³»ç»Ÿçš„é»˜è®¤ç›®æ ‡ï¼Œä»¥ç¡®å®šæœåŠ¡åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æ˜¯å¦å¯ç”¨ã€‚
```

## ç¯å¢ƒå˜é‡

å…¨å±€é…ç½®æ˜¯/etc/profile

åŒæ ·æ˜¯åœ¨~/.bashrcæ–‡ä»¶ä¸‹(æˆ–è€…~/.zshrc å–å†³äºä½ çš„shell)
æ·»åŠ ï¼š

```shell
export PATH=$PATH:/usr/local/nginx/sbin
```

å°†æŒ‡å®šç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­

## å‘½ä»¤åˆ«å

åœ¨ ~/.bashrc ä¸‹ 

æ³¨æ„ï¼šrootç”¨æˆ·å’Œæ™®é€šç”¨æˆ·çš„ .bashrc æ˜¯éš”ç¦»çš„

```bash
alias ll='ls $LS_OPTIONS -l'
alias dps='docker ps --format "table {{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}\t"'
alias dis='docker images'
```

## æº

- aptæºä½ç½®ï¼š
  
  ```shell
  /etc/apt/sources.list
  ```
  
  â€‹    å‚è€ƒ: [url](https://developer.aliyun.com/mirror/)

- yumæºä½ç½®:
  
  ```shell
  /etc/yum.repos.d/
  #è¿™é‡Œçš„.d æ˜¯ä¸€ç§å‘½åé£æ ¼ï¼Œè¡¨ç¤ºdirectory ç›®å½•çš„æ„æ€
  ```

## ç¾åŒ–

æˆ‘çš„ç»ˆç«¯ä¸€ç›´æ˜¾ç¤ºçš„å®Œæ•´çš„è·¯å¾„å‰ç¼€ï¼Œè¿™æ ·å¦‚æœæˆ‘æ“ä½œçš„æ–‡ä»¶éå¸¸æ·±å…¥ï¼Œé‚£ä¹ˆå°±å¾ˆéš¾å—ã€‚å› æ­¤æˆ‘å°±æŠŠä»–æ”¹æˆäº†åªæ˜¾ç¤ºæœ€åä¸€çº§ç›®å½•ï¼Œè¿™æ ·æ¸…çˆ½ä¸€äº›

é…ç½®æ–¹å¼ï¼šåœ¨`/etc/profile`ä¸­é…ç½®å°±å¯ä»¥åº”ç”¨åˆ°å…¨å±€ã€‚å½“ç„¶ä¹Ÿå¯åœ¨æ™®é€šç”¨æˆ·æˆ–è€…rootç”¨æˆ·çš„.bashrcä¸­é…ç½®

```bash
# å®Œå…¨æ˜¾ç¤ºå®Œæ•´çš„å·¥ä½œç›®å½•åç§°
export PS1='[\u@\h $PWD]\$ '
# åªåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•
export PS1='[\u@\h \W]\$'  # æˆ‘ç”¨çš„å°±æ˜¯è¿™ä¸ª
# æ˜¾ç¤ºå®Œæ•´å·¥ä½œç›®å½•ï¼Œå½“å‰ç”¨æˆ·ç›®å½•ä¼šä»¥ ~ä»£æ›¿
export PS1='[\u@\h \w]\$'
```

ä¿®æ”¹å®Œæˆåé‡æ–°åŠ è½½è¯¥é…ç½®æ–‡ä»¶å³å¯ `source /etc/profile`

è¿™é‡Œæˆ‘è®°å½•ä¸€ä¸ªæˆ‘è‡ªå·±ç¨å¾®æ”¹è£…äº†ä¸€ä¸‹çš„æ¯”è¾ƒæ»¡æ„çš„é…ç½®ï¼š

```bash
export PS1='[\[\e[1;35m\]\u@\h:\[\e[0m\]\[\e[1;33m\]\W\[\e[1;35m\]\[\e[0m\]]\[\e[1;34m\]\$ \[\e[0m\]'
```

### zsh shell

zshæ”¯æŒæ’ä»¶æ‰©å±•å’Œä¸»é¢˜åŠŸèƒ½ã€‚

[oh-my-zsh](https://ohmyz.sh/)æ˜¯zshçš„ä¸€ä¸ªå®ç°ã€‚æ˜¯ç®¡ç†zshé…ç½®çš„æ¡†æ¶ã€‚

åœ¨oh-my-zshå®˜æ–¹çš„[github wiki](https://github.com/ohmyzsh/ohmyzsh/wiki)ä¸­åˆ—å‡ºäº†å¾ˆå¤šå†…ç½®çš„ä¸»é¢˜ã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥åº”ç”¨è¿™äº›å†…ç½®ä¸»é¢˜ï¼Œè¿˜å¯ä»¥åœ¨è¿™äº›å†…ç½®ä¸»é¢˜ä¸Šè¿›è¡ŒäºŒæ¬¡å®šåˆ¶ï¼Œéå¸¸é“¶æåŒ–ï¼

- æ’ä»¶ä½äº:   `~/.oh-my-zsh/pulgins/`

- ä¸»é¢˜ä½äº:   `~/.oh-my-zsh/themes/`

- ä¿®æ”¹æ’ä»¶/ä¸»é¢˜ï¼š åœ¨`~/.zshrc`ä¸­é…ç½®ã€‚ 

#### å®‰è£…oh-my-zsh

1. æ£€æŸ¥å½“å‰å¯ç”¨shell
   
   ```bash
   cat /etc/shells
   ```

2. æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„shell
   
   ```bash
   echo $SHELL
   ```

3. å®‰è£…zsh shell
   
   ```bash
   apt install zsh
   ```

4. åˆ‡æ¢shell
   
   ```bash
   chsh -s /bin/zsh
   ```

5. å®‰è£…oh my zsh
   
   ```bash
   sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
   ```

6. ä¸‹è½½è¯­æ³•é«˜äº®æ’ä»¶
   
   ```bash
   git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh}/plugins/zsh-syntax-highlighting
   ```

7. ä¸‹è½½è‡ªåŠ¨æç¤ºæ’ä»¶
   
   ```bash
   git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh}/plugins/zsh-autosuggestions
   ```

8. å®‰è£…æ’ä»¶
   
   ```bash
   nano ~/.zshrc
   ```
   
   ```bash
   plugins=(git zsh-syntax-highlighting zsh-autosuggestions)
   ```

9. æ›´æ–°`.zshrc`
   
   ```bash
   source ~/.zshrc
   ```

# ç”¨æˆ·

`/etc/passwd` æ–‡ä»¶ä¸­ä¿å­˜äº†æœºå™¨ä¸Šæ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯

## ç”¨æˆ·

æ·»åŠ ç”¨æˆ·

```shell
adduser www
```

æ›´æ”¹å¯†ç 

```shell
passwd www
```

åˆ é™¤ç”¨æˆ·

```shell
userdel -r www
```

## ä¿®æ”¹æ‰€å±ç”¨æˆ·å’Œç”¨æˆ·ç»„

ä¿®æ”¹æ‰€å±ç”¨æˆ·ä»¥åŠç”¨æˆ·ç»„

```sh
chown [-R] ownname:groupname filename
```

ä¿®æ”¹æ‰€å±ç”¨æˆ·ç»„

```sh
chgrp [-R] groupname filename
```

# ä¼˜åŒ–

## æ‰©å±•

æˆ‘ä½¿ç”¨çš„æ˜¯debian gnomeæ¡Œé¢

è®°å½•ä¸€äº›æå‡ä½“éªŒçš„æ‰©å±•ç¨‹åºï¼š

1. Plank
   
   æ¡Œé¢åº•éƒ¨dockæ 
   
   ```shell
   sudo apt update && sudo apt install plank
   ```

2. ç³»ç»Ÿé»˜è®¤è¾“å…¥æ³•Fcitx5
   
   æˆ‘å–œæ¬¢æç®€é£æ ¼ï¼Œæ‘’å¼ƒé‚£äº›èŠ±é‡Œèƒ¡å“¨è¿˜å ç”¨èµ„æºçš„ç¬¬ä¸‰æ–¹è¾“å…¥æ³•ç¨‹åº

3. [gnome-shell-extension-appindicator](https://github.com/ubuntu/gnome-shell-extension-appindicator)
   
   å› ä¸ºgnomeæ¡Œé¢æ— æ³•æ˜¾ç¤ºåå°è¿è¡Œçš„ç¨‹åºï¼Œæœ‰çš„åº”ç”¨ç¨‹åºå·²å…³é—­å°±è¿›å…¥åå°è¿è¡Œï¼Œæ— æ³•å†æ¬¡å”¤èµ·ã€‚è¿™ç§æƒ…å†µå¤ªè®©äººå¤´ç–¼ã€‚è¿™ä¸ªæ‰©å±•ç¨‹åºå¯ä»¥è®©æ¡Œé¢ç³»ç»Ÿæ˜¾ç¤ºæ‰˜ç›˜ç¨‹åºã€‚å®ç°ç±»ä¼¼winçš„å³ä¸‹è§’æ‰˜ç›˜æ•ˆæœã€‚

## ä½“éªŒ

æœ‰æ—¶å€™åœ¨ `/etc/profile` ä¸­é…ç½®äº†åˆ«åæˆ–è€…ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯æ¯æ¬¡é‡å¯shellæˆ–è€…é‡å¯ç³»ç»Ÿï¼Œè¿™äº›é…ç½®éƒ½ä¼šå¤±æ•ˆï¼Œéƒ½å¿…é¡»å†æ‰§è¡Œä¸€é`source /etc/profile`æ‰è¡Œã€‚

è§£å†³ï¼š åœ¨`~/.bashrc` ä¸­æ·»åŠ  `source /etc/profile`

# ç½‘ç»œ

`netstat` æ˜¾ç¤ºç³»ç»Ÿç½‘ç»œä¿¡æ¯ å¸¸ç”¨å‚æ•°: 

- `-tunlp` æ˜¾ç¤ºä½¿ç”¨tcpåè®®çš„è¿›ç¨‹åï¼Œç«¯å£ï¼Œipç­‰ä¿¡æ¯

> `netstat -tunlp | grep 781` æŸ¥çœ‹781è¿›ç¨‹ç›‘å¬çš„ç«¯å£å·.

`ifconfig` ç”¨äºé…ç½®ç½‘ç»œæ¥å£

`iwconfig` ç”¨äºé…ç½®æ— çº¿ç½‘ç»œæ¥å£

## åè¯è§£æ

ä½¿ç”¨`ifconfig`æŸ¥çœ‹ç½‘ç»œé…ç½®ï¼Œå…³æ³¨ä¸€ä¸‹å‡ ä¸ªé¡¹ï¼š

`lo`:  è¡¨ç¤ºæœ¬åœ° local

`wlp3s0`: è¡¨ç¤ºWLAN PCIæ¥å£ä½ç½®ï¼šbus=3(æ€»çº¿), slot=0(æ’æ§½)

`enp2s0`: è¡¨ç¤ºEtnernet PCIæ¥å£ä½ç½®ï¼šbus=2(æ€»çº¿), slot=0(æ’æ§½)

## é˜²ç«å¢™

debianä½¿ç”¨ufwé˜²ç«å¢™ï¼š

```shell
apt install ufw
ufw status 
```

centosç›´æ¥ä½¿ç”¨systemctl :

```shell
systemctl status firewalld
```

# shellè„šæœ¬

## åå°æ‰§è¡Œshellè„šæœ¬

æ‰§è¡Œå‘½ä»¤åé¢åŠ ä¸ª `&` å°±å¥½äº†

```shell
sh jmeter.sh &
```

## ç¬¦å·

> ${}, [], $(), $(()), [[]], (())çš„ä½œç”¨

1. `${}`ä¸`$`
   
   éƒ½æ˜¯ç”¨æ¥å¼•ç”¨å˜é‡çš„ã€‚${}å¯ä»¥æŒ‡å®šå¼•ç”¨çš„è¾¹ç•Œï¼Œä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²å˜é‡è¿›è¡Œæˆªå–ç­‰

2. `[] `ä¸ `test`
   
   [ ]æ˜¯testå‘½ä»¤çš„å¦ä¸€ç§å½¢å¼ï¼Œç”¨äºåˆ¤æ–­æŸä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼æ˜¯0æˆ–è€…é0ï¼Œå¸¸ç”¨äºifå‘½ä»¤çš„åˆ¤æ–­æ¡ä»¶
   `test $a == "linux"` ç­‰äº `[ $a == "linux" ]`
   
   ```shell
   if test $a == "linux"
   then
       echo "i am linux"
   elif [ $a == "java" ] 
   then
       echo "i am java"
   fi
   ```
   
   > æ³¨æ„"[â€œåå’Œâ€]â€œå‰éƒ½éœ€è¦æœ‰ç©ºæ ¼ï¼Œå¹¶ä¸”â€=="ä¸¤è¾¹ä¹Ÿéƒ½è¦æœ‰ç©ºæ ¼

3. `$()` å’Œ ``
   
   $()å’Œ``çš„ä½œç”¨ä¸€è‡´ï¼Œéƒ½æ˜¯ç”¨æ¥åšå‘½ä»¤æ›¿æ¢ç”¨ï¼Œä¸€èˆ¬ç”¨äºå°†å‘½ä»¤è¿”å›çš„ç»“æœä¼ é€’ç»™å˜é‡
   
   ```shell
   a=$(ls /home/hadoop101/)
   a=`ls /home/hadoop101/\`
   # aä¿å­˜çš„æ˜¯ä¸Šè¿°å‘½ä»¤çš„è¿”å›å€¼ï¼Œå³ä¸€ä¸ªç›®å½•åˆ—è¡¨
   ```

4. `$[ ] `å’Œ` $(( ))`
   
   $[]å’Œ$(())çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯è¿›è¡Œæ•°å­¦è¿ç®—çš„ï¼Œæ”¯æŒÂ±*/%,å¹¶ä¸”åœ¨$[ ]å’Œ$(( ))ä¸­ä½¿ç”¨å˜é‡ä¸éœ€è¦$å¼•ç”¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡å
   
   ```shell
   echo $[2+7]
   # 9
   a=3;b=4;echo $[$a+$b]
   # 7
   echo $((2+7))
   # 9
   a=3;b=4;echo $(($a+$b))
   # 7
   a=3;b=4;echo $((a+b))
   # 7
   ```

5. `[[]]`
   
   [[ ]]æ˜¯[ ]çš„å¢å¼ºç‰ˆï¼Œå…¶è¿”å›å€¼ä¹Ÿæ˜¯0æˆ–è€…é0
   
   - åœ¨`[[]]`ä¸­ä½¿ç”¨> < ä¸éœ€è¦è½¬ä¹‰å­—ç¬¦
     
     ```shell
     if [[ $1 > 5 ]]
     then
             echo "$1çš„å€¼å¤§äº5"
     else
             echo "$1çš„å€¼å°äº5"
     fi
     ```
   
   - æ”¯æŒ&&å’Œ||ï¼Œä½†æ˜¯ä»…æ”¯æŒ==å’Œ!=çš„è¿æ¥
     
     ```shell
     # æ­£ç¡®ç¤ºä¾‹
     if [[ $a != 3 && $a != 10 ]] 
     then
         echo "hello i am linux"
     fi
     # é”™è¯¯ç¤ºä¾‹ï¼š
     if [[ $a > 3 && $a != 10 ]] 
     then
         echo "hello i am linux"
     fi
     ```
   
   - `[[]]`æ¯”è¾ƒå­—ç¬¦ä¸²æ”¯æŒæ­£åˆ™åŒ¹é…å’Œé€šé…ç¬¦åŒ¹é…
     
     ```shell
     # é€šé…ç¬¦åŒ¹é…
     if [[ linux == l?nu? ]]
     then
         echo "i am linux"
     else
         echo "i am not linux"
     fi
     ```
     
     ```shell
     # æ­£åˆ™åŒ¹é…
     if [[ linux =~ ^li[abn]ux ]]
     then
         echo "i am linux"
     else
         echo "i am not linux"
     fi
     ```

6. `(())`
   
   - ä¸$ç»“åˆä½¿ç”¨è¿›è¡Œæ•°å­¦è¿ç®—$(( ))
   - åœ¨forå¾ªç¯å‘½ä»¤ä¸­æ§åˆ¶å¾ªç¯ï¼Œç±»ä¼¼äºcè¯­è¨€
   - æ”¹å˜å˜é‡çš„å€¼ï¼Œä¸”ä¸éœ€è¦$å¼•ç”¨
   
   ```shell
   for((i=1;i<10;i++))
   do
           echo "this is $i"
   done
   ```
   
   ```shell
   i=0
   while [ $i -le 10 ]
   do
           echo "this is $i"
           ((i++))
   done
   
   # æˆ–è€…
   
   i=0
   while [ $i -le 10 ]
   do
           echo "this is $i"
           ((i=i+1))
   done
   ```

# sshåŠ å¯†éš§é“

ä½¿ç”¨sshå»ºç«‹éš§é“ï¼Œå®‰å…¨çš„è®¿é—®æœåŠ¡å™¨ä¸­çš„åº”ç”¨ã€‚

ç°åœ¨å‡è®¾æœåŠ¡å™¨ipä¸º `1.2.3.4` ï¼Œå…¶ä¸­ `8080` ç«¯å£æœ‰ä¸€ä¸ªåº”ç”¨ã€‚

å»ºç«‹sshéš§é“ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šæ‰§è¡Œ:

```sh
ssh -N -L 8081:localhost:8080 user@1.2.3.4
```

é€šè¿‡ä»¥ä¸Šå‘½ä»¤ï¼Œä½¿ç”¨sshè¿›è¡Œæœ¬åœ°ç«¯å£è½¬å‘ï¼Œå°†æœ¬åœ° `8081` ç«¯å£çš„æµé‡è½¬å‘åˆ° `1.2.3.4` ä¸»æœºçš„ `8080` ç«¯å£ä¸Šã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ç›´æ¥è®¿é—® `8081` ç«¯å£å³å¯ä½¿ç”¨æœåŠ¡å™¨ `8080` çš„æœåŠ¡ã€‚

# frpå†…ç½‘ç©¿é€

[æ–‡æ¡£ | frp](https://gofrp.org/zh-cn/docs/)

## è®¿é—®å†…ç½‘webæœåŠ¡

1. frps.toml : 

```toml
bindPort = 7000
vhostHTTPPort = 8080
```

2. frpc.toml

```toml
serverAddr = "x.x.x.x"
serverPort = 7000

[[proxies]]
name = "web"
type = "http"
localPort = 80
customDomains = ["x.x.x.x"]  #å¦‚æœæ²¡æœ‰åŸŸå,ç›´æ¥å¡«å†™ipåœ°å€

[[proxies]]
name = "web2"
type = "http"
localPort = 8080
customDomains = ["www.yourdomain2.com"]
```

3. é€šè¿‡  `x.x.x.x:8080` è®¿é—®webæœåŠ¡ï¼Œé€šè¿‡ `www.yourdomain2.com:8080` è®¿é—®web2æœåŠ¡

## é€šè¿‡frpå®ç°è¿œç¨‹è®¿é—®æœ¬æœº

åŸç†å°±æ˜¯é€šè¿‡frpå†…ç½‘ç©¿é€å°†windowsä¸»æœºçš„è¿œç¨‹è¿æ¥ç«¯å£ï¼ˆ3389ï¼‰æ˜ å°„åˆ°å…¬ç½‘æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡å…¬ç½‘æœåŠ¡å™¨æ¥å¯¹windwosä¸»æœºè¿›è¡Œè¿œç¨‹æ§åˆ¶äº†ã€‚å…·ä½“éœ€è¦ç¼–å†™çš„é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

- å…¬ç½‘æœåŠ¡å™¨ frps.toml

```toml
bindPort = 7777

webServer.addr = "0.0.0.0"
webServer.port = 8888
webServer.user = "xxx"
webServer.password = "xxx"

log.to = "./frpslog/frps.log"
log.level = "info"
log.maxDays = 3

auth.method = "token"
auth.token = "xxx"

allowPorts = [
        { single = 6666 }
]
```

> è§£é‡Šï¼š
>
> bindPort = 7878  frpæœåŠ¡è¿è¡Œçš„ç«¯å£
>
> webServer  webé¢æ¿æœåŠ¡
>
> log  æ—¥å¿—æœåŠ¡
>
> auth  è®¤è¯é…ç½®
>
> allowPorts  å…è®¸è½¬å‘çš„ TCP ç«¯å£æˆ–ç«¯å£èŒƒå›´

- æœ¬åœ°windowsä¸»æœº

```toml
[common]
server_addr = "1.2.3.4"
server_port = 7777
token = xxx

[rdp] 
type = "tcp"
local_ip = 127.0.0.1
local_port = 3389
remote_port = 6666
```

è¿™æ ·é€šè¿‡è®¿é—® `1.2.3.4:6565` å³å¯å¯¹æœ¬æœºè¿›è¡Œè¿œç¨‹æ§åˆ¶ã€‚

# DNSæœåŠ¡å™¨

é€šè¿‡Bindæ­å»ºdnsæœåŠ¡å™¨

## å®‰è£…

- centos

  ```shell
  yum install bind bind-utils
  ```

- ubuntu

  ```shell
  apt install bind9 bind9-utils
  ```

å®‰è£…å®Œæˆåï¼Œé€šè¿‡ `systemctl` æŸ¥çœ‹æœåŠ¡çš„çŠ¶æ€ï¼š

```shell
systemctl status named
```

## é…ç½®

1. é…ç½®æ–‡ä»¶

centosé…ç½®æ–‡ä»¶ä½ç½®:  `/etc/named.conf`

ubuntué…ç½®æ–‡ä»¶ä½ç½®: `/etc/bind/named.conf` 

æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œé…ç½®åŸŸåè§£æï¼š

```shell
options {
    listen-on port 53 { any; };        //ç›‘å¬æ‰€æœ‰ipv4æµé‡
    listen-on-v6 port 53 { none; };   //ä¸ç›‘å¬ipv6æµé‡
    dnssec-accept-expired no;        // æ‹’ç»è¿‡æœŸçš„DNSSECè®°å½•
    filter-aaaa-on-v4 yes;           // è¿‡æ»¤IPv6è®°å½•ï¼ˆAAAAï¼‰
    dnssec-enable no;               // å®Œå…¨ç¦ç”¨DNSSEC
    dnssec-validation no;          // å…³é—­DNSSECéªŒè¯
    directory       "/var/named";
    dump-file       "/var/named/data/cache_dump.db";
    statistics-file "/var/named/data/named_stats.txt";
    memstatistics-file "/var/named/data/named_mem_stats.txt";
    allow-query     { any; };
    recursion yes;
};

//...å…¶ä»–é…ç½®

//é»˜è®¤èµ°223.5.5.5æœåŠ¡å™¨
zone "." IN {
	type forward;
	forwarders { 223.5.5.5; };
	forward only;
}

//è‡ªå®šä¹‰åŸŸåè‡ªè¡Œè§£æ
zone "file.com" IN { 
    type master;
    file "file.com.zone"  
};

//...å…¶ä»–é…ç½®
```

2. é…ç½®è§£ææ–‡ä»¶

   centosï¼š `/var/named/file.com.zone`

   ubuntuï¼š `/etc/bin/db.file.com`

   ```shell
   $TTL    604800
   @       IN      SOA     file.com. root.file.com. (
                                 2         ; Serial
                            604800         ; Refresh
                             86400         ; Retry
                           2419200         ; Expire
                            604800 )       ; Negative Cache TTL
   
   ;@       IN      NS      ns.file.com.
   @       IN      A       10.165.1.12   ;é…ç½®file.comçš„ ipåœ°å€
   www     IN      A       10.165.1.12   ;é…ç½®www.file.comçš„ ipåœ°å€
   ns      IN      A       10.165.1.12   ;é…ç½® ns.file.com çš„ ipåœ°å€
   ```

3. é‡å¯æœåŠ¡ `systemctl restart named`

# WSL

windows subsystem of linux ( windowsä¸‹çš„linuxå­ç³»ç»Ÿ )

WSLå…è®¸ä½ åœ¨windowsæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œlinuxå­ç³»ç»Ÿ. æ¯”è™šæ‹Ÿæœºæ–¹ä¾¿å¾ˆå¤š. 

WSLå®‰è£…: å‚è€ƒ[MSå®˜æ–¹æ–‡æ¡£](https://learn.microsoft.com/zh-cn/windows/wsl/install-manual)

å¦‚ä½•å®‰è£…, å®˜æ–¹ç»™æ–‡æ¡£å¾ˆè¯¦ç»†äº†. æˆ‘è¿™é‡Œä¸»è¦è®°å½•ä¸€äº›wslçš„å¸¸è§æ“ä½œ

## å¸¸è§å‘½ä»¤

- `wsl --help` - å¸®åŠ©æ–‡æ¡£

- `wsl` - å¯åŠ¨å­ç³»ç»Ÿ

- `wsl --shutdown` - å…³é—­å­ç³»ç»Ÿ

- `wsl --list -v`  - åˆ—å‡ºæ‰€æœ‰çš„å­ç³»ç»ŸåŠå…¶å¯¹åº”çš„wslç‰ˆæœ¬å·

- `wsl --list --online` - åˆ—å‡ºå…¨éƒ¨å¯ç”¨çš„å­ç³»ç»Ÿ

- `wsl -s <å­ç³»ç»Ÿ>` - è®¾ç½®é»˜è®¤çš„å­ç³»ç»Ÿ

## å¯¼å…¥å’Œå¯¼å‡º

è¿™ä¸ªæœ‰ç‚¹ç±»ä¼¼äºæŒ‚è½½å’Œå¸è½½. ä½¿ç”¨wslå®‰è£…çš„å­ç³»ç»Ÿåœ¨winä¸Šéƒ½ä¼šæœ‰ä¸€ä¸ªç£ç›˜æ˜ åƒæ¥å­˜å‚¨æ•°æ®, è¿™ä¸ªç£ç›˜é»˜è®¤æ˜¯è£…åœ¨Cç›˜çš„, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ›´æ”¹ä»–çš„ä½ç½®. 

å¯¹äºlinuxç³»ç»Ÿæ¥è¯´, åœ¨å®‰è£…çš„æ—¶å€™ä¸è¦è®©ä»–è‡ªåŠ¨å®‰è£….  é€‰æ‹©æ‰‹åŠ¨å®‰è£…. è‡ªå·±å»å®˜ç½‘ä¸‹è½½å‘è¡Œç‰ˆçš„å®‰è£…åŒ…. ç„¶åå°†ä¸‹è½½ä¸‹æ¥çš„.AppBundleåç¼€çš„æ–‡ä»¶æ”¹ä¸º.zipè¿›è¡Œè§£å‹. ä¼šå¾—åˆ°ç³»ç»Ÿæ˜ åƒæ–‡ä»¶ .appxåç¼€çš„æ–‡ä»¶, å†æ¬¡å°†å…¶åç¼€æ”¹ä¸º.zipè¿›è¡Œè§£å‹, æœ€åä¼šå¾—åˆ° .exeçš„å¯æ‰§è¡Œæ–‡ä»¶. åœ¨æƒ³è¦å®‰è£…çš„ä½ç½®è¿è¡Œè¯¥exeå¯æ‰§è¡Œæ–‡ä»¶å³å¯å®‰è£…linuxå­ç³»ç»Ÿ. ç„¶åä¼šå‘ç° æœ‰ä¸€ä¸ªext4.vhdxçš„ç£ç›˜æ˜ åƒæ–‡ä»¶, è¿™ä¸ªå°±æ˜¯å­ç³»ç»Ÿçš„æ•°æ®ç›˜.

é‡ç‚¹æ˜¯åœ¨winä¸Šå®‰è£…docker desktop. docker desktopçš„ä½¿ç”¨éœ€è¦åŸºäºwsl . å¦‚æœé»˜è®¤å®‰è£…çš„è¯, ä»–ä¼šç”Ÿæˆä¸¤ä¸ªç£ç›˜æ˜ åƒæ–‡ä»¶, ä¸€ä¸ªæ˜¯docker-desktop, ä¸€ä¸ªæ˜¯docker-desktop-data. ä»–ä»¬éƒ½é»˜è®¤åœ¨ `C:\\user\\xx\\AppData\\Local\\Docker\\wsl` ä½ç½®ä¸‹,  è¿™æ ·ä¸€æ—¦dockeré•œåƒå¤šäº†å, éå¸¸å ç”¨cç›˜ç©ºé—´. æˆ‘ä»¬éœ€è¦å°†è¿™ä¸¤ä¸ªç›˜æŒ‚è½½åˆ°Dç›˜ä¸‹ä»¥èŠ‚çœCç›˜ç©ºé—´

è¿™å°±ä¼šç”¨åˆ°wslçš„å¯¼å…¥å’Œå¯¼å‡ºå‘½ä»¤

### æ­¥éª¤

1. é€€å‡ºdocker desktop , å…³é—­wsl
   
   ```cmd
   wsl --shutdown
   ```

2. æŸ¥çœ‹wslçš„çŠ¶æ€, ç¡®è®¤å…³é—­
   
   ```cmd
   wsl --list -v
   ```

3. å¯¼å‡ºdocker-desktop-dataç£ç›˜æ–‡ä»¶
   
   ```cmd
   wsl --export docker-desktop-data "D:\\docker-desktop-data.tar"
   ```

4. å¸è½½docker-desktop-dataç£ç›˜æ–‡ä»¶ ( æ­¤å‘½ä»¤ä¼šåˆ é™¤ docker-desktop-data çš„ç£ç›˜æ˜ åƒæ–‡ä»¶)
   
   ```cmd
   wsl --unregister docker-desktop-data
   ```

5. å°†å¯¼å‡ºçš„ç£ç›˜æ–‡ä»¶é‡æ–°å¯¼å…¥wsl, å¹¶æŒ‡å®šå¯¼å…¥çš„ä½ç½®
   
   ```cmd
   wsl --import docker-desktop-data "D:\\.WSL\\Docker\\wsl" "D:\\docker-desktop-data.tar" --version 2
   ```

å®Œæˆ!

ä½†å®é™…ä¸Š, docker desktopè®¾ç½®ä¸­æä¾›äº†æ›´æ”¹disk image locationåŠŸèƒ½, å¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿çš„æ›´æ”¹è¿™ä¸¤ä¸ªç£ç›˜æ˜ åƒæ–‡ä»¶çš„ä½ç½®. 

è¿™é‡Œåªæ˜¯ä»¥docker desktopä½œä¸ºä¸€ä¸ªä¾‹å­, èƒ½å­¦ä¼šä¸¾ä¸€åä¸‰, åº”ç”¨åˆ°å…¶ä»–æƒ…å†µä¸‹. åŒæ—¶ä¹Ÿæœ‰åŠ©äºæˆ‘å¯¹wslçš„ç†è§£. 

æœ‰äº†wslè¿™ä¹ˆæ–¹ä¾¿çš„ä¸œè¥¿, è¿˜è¦ä»€ä¹ˆè™šæ‹Ÿæœº, ä»€ä¹ˆvmware, ä»€ä¹ˆvirtualbox éƒ½é è¾¹ç«™ !  ğŸ˜. 

## ç«¯å£è½¬å‘

æˆ‘å½“å‰çš„nginxæœåŠ¡éƒ¨ç½²åœ¨æœ¬æœºçš„wslä¸­ã€‚ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚æ˜¯ï¼Œå±€åŸŸç½‘å†…çš„æŸå°æœºå™¨å¸Œæœ›èƒ½å¤Ÿè®¿é—®åˆ°æˆ‘çš„nginxæœåŠ¡ã€‚ç›´æ¥è®¿é—®æˆ‘çš„ipåœ°å€æ˜¯ä¸è¡Œçš„ã€‚ç›´æ¥è®¿é—®æˆ‘wslçš„ipåœ°å€ä¹Ÿä¸è¡Œï¼Œè¿™é‡Œå¿…é¡»è¦åšç«¯å£è½¬å‘ï¼Œå°†è®¿é—®æˆ‘æœ¬æœºçš„è¯·æ±‚è½¬å‘åˆ°wslä¸­å».   -- æ¥æºï¼š[å¾®è½¯å®˜æ–¹æ–‡æ¡£](https://learn.microsoft.com/zh-cn/windows/wsl/networking#accessing-a-wsl-2-distribution-from-your-local-area-network-lan)

> ä»¥ä¸Šé—®é¢˜å‡ºç°åœ¨ å½“wslçš„ç½‘ç»œæ¨¡å¼ä¸ºé»˜è®¤æ¨¡å¼ï¼šNATæ¨¡å¼ ä¸‹ã€‚å½“wslç½‘ç»œæ¨¡å¼åˆ‡æ¢ä¸ºé•œåƒç½‘ç»œæ¨¡å¼ï¼Œä»¥ä¸Šé—®é¢˜ä¾¿ä¸å­˜åœ¨ï¼ˆå¯ä»¥ç›´æ¥è®¿é—®wslä¸­çš„æœåŠ¡ï¼‰ã€‚

éœ€è¦åœ¨windowsä¸Šè®¾ç½®ç«¯å£è½¬å‘ï¼š ä½¿ç”¨netshå‘½ä»¤

```powershell
# ç›‘å¬ä»»ä½•ipè®¿é—®80ç«¯å£çš„è¯·æ±‚ï¼Œå¹¶å°†å…¶è½¬å‘åˆ°wslçš„80ç«¯å£ä¸­
netsh interface portproxy add v4tov4 listenport=80 listenaddress=0.0.0.0 connectport=80 connectaddress=172.18.132.125
```

- `listenport`  ç›‘å¬çš„æœ¬æœºç«¯å£
- `listenaddress` ç›‘å¬çš„ipåœ°å€ (ä¸æŒ‡å®šçš„è¯é»˜è®¤æ˜¯0.0.0.0)
- `connectport` å¸Œæœ›wslè¿æ¥çš„ç«¯å£
- `connectaddress` é€šè¿‡wslå®‰è£…çš„linuxå‘è¡Œç‰ˆçš„ipåœ°å€

## wslç½‘ç»œ

å…³äºwslçš„ç½‘ç»œé—®é¢˜ï¼Œå‚è€ƒ [å¾®è½¯å®˜æ–¹æ–‡æ¡£](https://learn.microsoft.com/zh-cn/windows/wsl/networking) ã€‚è¯¥æ–‡æ¡£ä»‹ç»äº†å¦‚ä½•é•œåƒç½‘ç»œæ¨¡å¼ï¼ŒDNSéš§é“ï¼Œ è‡ªåŠ¨ä»£ç†ï¼Œé˜²ç«å¢™ç­‰çŸ¥è¯†ã€‚

## å¯ç”¨systemd

1. powershellæ‰§è¡Œ `wsl --update`

2.  ç¼–è¾‘ **/etc/wsl.conf**

   ```sh
   [boot]
   systemd=true
   ```

3. é‡å¯wsl

# æŸ¥çœ‹æœºå™¨çš„å…¬ç½‘ip

é€šè¿‡ä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡å¯ä»¥å®ç°. 

```shell
curl ip.sb
```

# ç›‘æ§ç³»ç»Ÿæµé‡

`iftop` å‘½ä»¤ç”¨äºç›‘æ§ç³»ç»Ÿæµé‡ã€‚

```shell
iftop -i eth0
```

è¿›å…¥äº¤äº’ç•Œé¢å æŒ‰ `h` æ˜¾ç¤ºå¸®åŠ©èœå•ã€‚

# WindowsçŸ¥è¯†

## å³é”®åœ¨æ­¤æ‰“å¼€

ä¿®æ”¹æ³¨å†Œè¡¨æ¥å®ç°ç¨‹åºå³é”®åœ¨æ­¤æ‰“å¼€çš„åŠŸèƒ½

1. å¯¹æ–‡ä»¶æœ¬èº«

   ```sh
   HKEY_CLASSES_ROOT\*\shell
   ```

2. å¯¹æ–‡ä»¶å¤¹

   ```sh
   HKEY_CLASSES_ROOT\Directory\shell
   ```

3. å¯¹ç©ºç™½èƒŒæ™¯

   ```sh
   HKEY_CLASSES_ROOT\Directory\Background\shell
   ```

åœ¨å¯¹åº”çš„shellç›®å½•ä¸‹ï¼š

1. æ–°å»ºé¡¹ï¼Œåç§°å”¯ä¸€å³å¯ã€‚

2. é…ç½®é»˜è®¤å€¼ä¸º â€œç”¨xxxæ‰“å¼€â€ ï¼ˆå³å³é”®èœå•æ˜¾ç¤ºçš„æ–‡å­—ï¼‰

3. åœ¨è¯¥é¡¹ä¸‹æ–°å»º`Command`é¡¹

4. `Command`é¡¹çš„é»˜è®¤å€¼è¦æ˜¯è¯¥ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„åŠ ä¸Šä¸€äº›å‚æ•°

   ```sh
   # ç¤ºä¾‹: ideaæ‰“å¼€å½“å‰ç›®å½•
   "D:\Program Files\JetBrains\IntelliJ IDEA 2024.1.1\bin\idea64.exe" "%V"
   # ç¤ºä¾‹: Terminalæ‰“å¼€å½“å‰ç›®å½•
   "D:\Program Files\terminal-1.21.2701.0\WindowsTerminal.exe" -d "%V"
   # ç¤ºä¾‹ï¼šCodeæ‰“å¼€é€‰å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
   "D:\Program Files\Microsoft VS Code\Code.exe" "%1"
   ```

5. å›åˆ°ç¬¬ä¸€æ­¥çš„é¡¹ç›®å½•ï¼Œæ–°å»º â€œå¯æ‰©å……å­—ç¬¦ä¸²å€¼â€ï¼Œå‘½åä¸ºIconï¼ŒæŒ‡å®šæ•°æ®ä¸ºç¬¬å››æ­¥çš„è·¯å¾„å³å¯

> æ³¨å†Œè¡¨å¸¸ç”¨å‚æ•°ï¼š
>
> 1. **`%V`**ï¼šä»£è¡¨å½“å‰é€‰å®šçš„è·¯å¾„ã€‚
> 2. **`%1`**ï¼šä»£è¡¨å½“å‰é€‰å®šçš„é¡¹ç›®çš„å®Œæ•´è·¯å¾„ã€‚
